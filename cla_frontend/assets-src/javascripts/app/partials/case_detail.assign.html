<header class="PageHeader cf">
  <h1 class="u-pullLeft">Assign a provider</h1>
</header>

<!-- no providers -->
<div ng-show="suggested_providers.length < 1 && ! suggested_provider">
  <p class="Error Error--basic">There are <strong>no providers available</strong> to assign to this case. Please contact a supervisor.</p>
  <p><a ui-sref="case_detail.edit">Return to case</a></p>
</div>

<div ng-show="!suggested_provider && suggested_providers.length > 0">
  <p class="Error Error--basic">This case has <strong>no category assigned</strong> but you can still manually assign a provider.</p>
  <p><a ui-sref="case_detail.edit">Return to case</a></p>
</div>

<form method="post" ng-submit="assign()">
  <div ng-show="selected_provider.id">
    <div class="ContactBlock ContactBlock--grey clearfix">
      <h2 class="ContactBlock-heading">{{ selected_provider.name }}</h2>

      <p>{{ selected_provider.telephone_frontdoor }} (Front door)
        <br>{{ selected_provider.telephone_backdoor }} (Back door)</p>
    </div>
  </div>

  <div ng-show="is_manual">
    <div class="FormRow">
      <input type="text" name="provider-search" placeholder="Search providers and other help organisations" class="FormRow-field--l" ng-model="provider_search">
    </div>

    <div class="FormRow FormRow--group" ng-repeat="provider in suggested_providers | filter:provider_search">
      <label class="FormRow-label FormRow-label--odd">
        <input name="provider" type="radio" ng-model="$parent.selected_provider" ng-value="provider">
        <strong>{{ provider.name }}</strong>

        <p class="FormRow-inner">{{ provider.telephone_frontdoor }} (Front door)
          <br>{{ provider.telephone_backdoor }} (Back door)</p>
      </label>
    </div>

    <div class="FormRow">
      <label for="assign_notes" class="visuallyhidden">Reassignment notes</label>
      <textarea name="assign_notes" id="assign_notes" cols="30" rows="4" ng-model="assign_notes" placeholder="Provider reassignment comments"></textarea>
    </div>
  </div>

  <div class="FormActions">
    <button type="submit" class="Button">Assign provider</button>

    <a ui-sref="case_detail.defer_assignment" class="Button Button--secondary">Defer assignment</a>

    <a class="Button Button--secondary" ng-click="assignManually(true)" ng-show="!is_manual && suggested_providers.length > 0">Assign other provider manually</a>
    <a ui-sref="case_detail.edit" ng-show="!is_manual">Cancel</a>

    <a ui-sref="case_detail.decline_specialists" class="Button Button--secondary" ng-show="is_manual && suggested_provider.id">Decline all providers</a>
    <a href="" ng-click="assignManually(false)" ng-show="is_manual && suggested_provider.id">Cancel</a>
  </div>
</form>
