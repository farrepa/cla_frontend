<nav class="SubNav">
  <a ui-sref="case_list({search:'', sort:''})" ng-if="search" class="SubNav-link SubNav-link--back">Back to all cases</a>
</nav>

<header class="PageHeader cf" ng-class="{'PageHeader--wo-search': !search}">
  <h1 class="u-pullLeft">
      {{ search ? 'Results' : 'Cases' }} {{ search ? '"'+search+'"' : '' }}
  </h1>
  <form name="newCaseForm" ng-controller="CaseCtrl" ng-submit="addCase()">
    <button id="create_case" type="submit" class="Button">Create a case</button>
  </form>

</header>


<table class="CaseList" cellpadding="0" cellspacing="0" border="0" width="100%">
  <thead>
  <tr>
    <th width="23%"><span class="visuallyhidden">Reference</span></th>
    <th>Name</th>
    <th width="17%"><a href="" ng-click="sortToggle('created')" ng-class="{'u-sortDesc': orderProp=='-created', 'u-sortAsc': orderProp=='created'}">Created</a></th>
    <th width="17%"><a href="" ng-click="sortToggle('modified')" ng-class="{'u-sortDesc': orderProp=='-modified', 'u-sortAsc': orderProp=='modified'}">Modified</th>
    <th width="10%"><span class="visuallyhidden">Owner</span></th>
  </tr>
  </thead>
  <tbody>
    <tr dir-paginate="case in cases.results | itemsPerPage: 20" total-items="cases.count" current-page="currentPage">
      <td>
        <a ui-sref="case_detail.edit({caseref:case.reference})">{{ case.reference }}</a>
        <span ng-show="case.isInScopeAndEligible()"> / {{ case.laa_reference }}</span>
      </td>
      <td>{{ case.full_name }}</td>
      <td><span am-time-ago="case.created"></span></td>
      <td><span am-time-ago="case.modified"></span></td>
      <td>{{ case.locked_by }}</td>
    </tr>
  </tbody>
</table>

<dir-pagination-controls on-page-change="pageChanged(newPageNumber)" data-boundary-links="true"></dir-pagination-controls>
