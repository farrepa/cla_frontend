<nav class="SubNav">
  <a ui-sref="case_list({search:'', sort:''})" ng-if="search" class="SubNav-link SubNav-link--back">Back to all cases</a>
</nav>

<header class="PageHeader cf" ng-class="{'PageHeader--wo-search': !search}">
  <h1 class="u-pullLeft">
      {{ search ? 'Results' : 'Cases' }} {{ search ? '"'+search+'"' : '' }}
  </h1>
  <form name="newCaseForm" class="newCaseForm u-pullRight" ng-submit="addCase()">
    <button id="create_case" type="submit" class="Button">Create a case</button>
  </form>
</header>


<table class="CaseList" cellpadding="0" cellspacing="0" border="0" width="100%">
  <thead>
  <tr>
    <th><span class="visuallyhidden">Reference</span></th>
    <th><a href="" ng-click="sortToggle('personal_details__full_name')" ng-class="sortClass('personal_details__full_name')">Name</a></th>
    <th><a href="" ng-click="sortToggle('personal_details__postcode')" ng-class="sortClass('personal_details__postcode')">Postcode</a></th>
    <th><a href="" ng-click="sortToggle('personal_details__date_of_birth')" ng-class="sortClass('personal_details__date_of_birth')">Date of Birth</a></th>
    <th><a href="" ng-click="sortToggle('eligibility_check__category__name')" ng-class="sortClass('eligibility_check__category__name')">Category of Law</a></th>
    <th><a href="" ng-click="sortToggle('modified')" ng-class="sortClass('modified')">Modified</th>
  </tr>
  </thead>
  <tbody>
    <tr dir-paginate="case in cases.results | itemsPerPage: 20" total-items="cases.count" current-page="currentPage" ng-class="{'is-rejected': case.rejected}">
      <td>
        <a href="" ng-click="goToCase(case.reference)">{{ case.reference }}</a>
        <span ng-show="case.isInScopeAndEligible()"> / {{ case.laa_reference }}</span>
      </td>
      <td>{{ case.full_name }}</td>
      <td>{{ case.postcode }}</td>
      <td>{{ case.date_of_birth|date:'dd/MM/yyyy' }}</td>
      <td>{{ case.category }}</td>
      <td>
        <span am-time-ago="case.modified"></span>
        <br>
        <small>{{ case.modified|date:'MMM d, y, h:mma' }}</small>
      </td>
    </tr>
  </tbody>
</table>

<dir-pagination-controls on-page-change="pageChanged(newPageNumber)" data-boundary-links="true"></dir-pagination-controls>
