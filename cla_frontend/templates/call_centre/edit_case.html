{% extends "call_centre/base.html" %}{% load i18n humanize helpers %}

{% block body_classes %}{{ product_type }} {{ phase }} v-Case{% endblock %}

{% block left_content %}
  <nav class="SubNav">
    <a href="{% url 'call_centre:dashboard' %}" class="SubNav-link SubNav-link--back">{% trans "Back to cases" %}</a>
  </nav>

  <form method="post" action=".">
    <!--<div class="FormRow IconRow">
      <label for="" class="visuallyhidden">Title</label>
      <input type="text" name="" id="" placeholder="Title">
    </div>-->
    <div class="FormRow IconRow IconRow--name">
      <label for="" class="visuallyhidden">Name</label>
      <input type="text" name="" id="" placeholder="Name">
    </div>
    <div class="FormRow IconRow IconRow--address">
      <label for="" class="visuallyhidden">Post code</label>
      <input type="text" name="" id="" placeholder="Post code">
    </div>
    <div class="FormRow IconRow">
      <label for="" class="visuallyhidden">Address</label>
      <textarea name="" id="" cols="20" rows="3" placeholder="Address"></textarea>
    </div>
    <div class="FormRow IconRow IconRow--email">
      <label for="" class="visuallyhidden">Email</label>
      <input type="text" name="" id="" placeholder="Email">
    </div>
    <div class="FormRow IconRow IconRow--phone">
      <label for="" class="visuallyhidden">Home</label>
      <input type="text" name="" id="" placeholder="Home">
    </div>
    <div class="FormRow IconRow">
      <label for="" class="visuallyhidden">Mobile</label>
      <input type="text" name="" id="" placeholder="Mobile">
    </div>
    <div class="cf">
      <button class="Button u-pullRight">Save details</button>
    </div>
  </form>

  <nav>
    <ol class="ProgressIndicator" role="progressbar" aria-valuetext="Step 1 of 4">
      <li class="ProgressIndicator-step is-complete"><a href="" class="ProgressIndicator-tick">Your problem</a></li>
      <li class="ProgressIndicator-step is-active">Your details</li>
      <li class="ProgressIndicator-step">Your finances</li>
      <li class="ProgressIndicator-step">Result</li>      
    </ol>
  </nav>
{% endblock %}

{% block middle_content %}
  <header class="PageHeader cf">
    <h1 class="u-pullLeft">{{ case_reference }} (State: {{ case.state }})</h1>
    <a href="{% url 'call_centre:close_case' case.reference %}" class="Button Button--secondary u-pullRight">Close case</a>
  </header>

  <div class="FormRow">
    <textarea name="" id="" rows="13" cols="20" placeholder="Comments about case {{ case_reference }}"></textarea>
  </div>
  <div class="cf">
    <button class="Button u-pullRight">Save notes</button>
  </div>

  <ul>
      <li><a href="{% url 'call_centre:assign_case' case.reference %}">Assign Case</a></li>
  </ul>

    <form method="post" action=".">
        {% csrf_token %}
        {% for k, subform in form.form_dict.items %}
            {{ subform.as_p }}
        {% endfor %}
    <input type="submit" value="submit">
    </form>
{% endblock %}

{% block right_content %}
  <div class="Timer cf">
    <span class="Timer-current u-pullLeft">00:01:02</span>
    <span class="Timer-total u-pullRight">00:13:06 total</span>
  </div>
  
  {% if case.caseoutcome_set %}
  <ul class="CaseHistory">
    {% for outcome in case.caseoutcome_set %}
    <li class="CaseHistory-item">
      {{ outcome.created|as_date }}<br>
      Case LA-2954-3453 opened<br>
      {% if outcome.notes %}
        {{ outcome.notes }}<br>
      {% endif %}
      (<a href="#">{{ outcome.created_by }}</a>)<br>
      <span class="CaseHistory-label">{{ outcome.outcome_code }}</span>
    </li>
    {% endfor %}
  </ul>
  {% endif %}

  <section>
    <form method="post" action="{% url 'call_centre:unlock_case' case_reference=case_reference %}">
      {% csrf_token %}
      {{ unlock_form.as_p }}
      <input type="submit" value="unlock">
    </form>
  </section>
    
{% endblock %}
